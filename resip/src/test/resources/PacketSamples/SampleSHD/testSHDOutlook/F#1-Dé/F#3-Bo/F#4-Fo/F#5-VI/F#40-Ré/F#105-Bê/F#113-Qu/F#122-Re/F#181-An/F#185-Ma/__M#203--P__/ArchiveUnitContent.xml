<Content>
    <DescriptionLevel>Item</DescriptionLevel>
    <Title>[Projet VITAM 0000054]: [API-access-external/v1/units -POST-Override-GET] : httpCode 405 - METHOD_NOT_ALLOWED sur $query/$match/EndDate</Title>
    <OriginatingSystemId>&lt;f05d35abce00316eb8b708d29d6c4515@213.32.79.242&gt;</OriginatingSystemId>
    <Writer>
        <FirstName>Mantis Bug Tracker</FirstName>
        <BirthName>Mantis Bug Tracker</BirthName>
        <Identifier>admtlvitam@gmail.com</Identifier>
    </Writer>
    <Addressee>
        <FirstName>thierry.casimirius</FirstName>
        <BirthName>thierry.casimirius</BirthName>
        <Identifier>thierry.casimirius@intradef.gouv.fr</Identifier>
    </Addressee>
    <SentDate>2017-01-06T15:49:04Z</SentDate>
    <ReceivedDate>2017-01-06T15:49:15Z</ReceivedDate>
    <TextContent>Le bogue suivant a été soumis. 
====================================================================== 
http://213.32.79.242/mantisbt/view.php?id=54 
====================================================================== 
Rapporteur:                 Omar
Responsable:                Omar
====================================================================== 
Projet:                     Projet VITAM
Bogue ID:                   54
Catégorie:                  BugFromTestlink
Reproductibilité:           toujours
Impact:                     mineur
Priorité:                   normale
Statut:                     affecté
Comportement attendu:        
US concernée:                
====================================================================== 
Date de soumission:         2017-01-06 16:48 CET
Dernière modification:      2017-01-06 16:48 CET
====================================================================== 
Résumé:                     [API-access-external/v1/units -POST-Override-GET]
: httpCode 405 - METHOD_NOT_ALLOWED sur $query/$match/EndDate
Description: 
La recherche par DescriptiveMetadataType via la balise EndDate ne fonctionne
pas.
L&apos;API retourne un httpCode 501, aulieu de retourner la/les Unit ayant un
critère EndDate désiré.
Exemple sur le cas de test PVI-238:Obtenir une liste d&apos;archives par
DescriptiveMetadataType via la balise EndDate

techniquement Lors du POST https://213.32.79.242:8444/access-external/v1/units
avec X-Http-Method-Override: GET, l&apos;api retourne une réponse avec httpCode 501
cf pj.



Étapes pour le reproduire: 
Lancer une requête sur l&apos;API avec ceci 
POST https://213.32.79.242:8444/access-external/v1/units HTTP/1.1
X-Http-Method-Override: GET
Content-Type: application/json
Accept: application/json
Content-Length: 158
Host: 213.32.79.242:8444
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

{
&quot;$query&quot;: [
    {
    &quot;$match&quot; :
    {&quot;EndDate&quot;    : &quot;2016-10-31T16:45:34&quot;}
     
    
    }
  ],
  &quot;$filter&quot;: {},
  &quot;$action&quot;: [],
  &quot;$projection&quot;: {
  }


Ou via le SOAP ALTRAN, lancer le cas de test ACC-01-000 \ Les balises
DescriptiveMetaType \PVI-238:Obtenir une liste d&apos;archives par
DescriptiveMetadataType via la balise EndDat, avec ce JSON
{
&quot;$query&quot;: [
    {
    &quot;$match&quot; :
    {&quot;EndDate&quot;    : &quot;2016-10-31T16:45:34&quot;}
     
    
    }
  ],
  &quot;$filter&quot;: {},
  &quot;$action&quot;: [],
  &quot;$projection&quot;: {
  }
}
====================================================================== 

Historique du bogue 
Date de modificationNom d’utilisateurChamp                    Changement      
    
====================================================================== 
2017-01-06 16:48 Omar           Nouveau bogue                                
2017-01-06 16:48 Omar           Statut                   nouveau =&gt; affecté  
2017-01-06 16:48 Omar           Assigné à                 =&gt; Omar            
2017-01-06 16:48 Omar           Fichier ajouté: PVI-238_06-01-2017-04-29_IN.csv
                   
======================================================================</TextContent>
</Content>