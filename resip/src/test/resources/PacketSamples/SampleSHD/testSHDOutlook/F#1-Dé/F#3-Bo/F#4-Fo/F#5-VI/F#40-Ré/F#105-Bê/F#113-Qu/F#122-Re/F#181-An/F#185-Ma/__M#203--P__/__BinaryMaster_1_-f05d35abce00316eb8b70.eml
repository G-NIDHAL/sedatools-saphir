Return-Path: admtlvitam@gmail.com
Received:  from 213.32.79.242 ([213.32.79.242])        by smtp.gmail.com with
 ESMTPSA id l6sm3986654wmd.5.2017.01.06.07.49.04        for
 <thierry.casimirius@intradef.gouv.fr>        (version=TLS1_2
 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);        Fri, 06 Jan 2017
 07:49:04 -0800 (PST)
Date: Fri, 6 Jan 2017 16:49:04 +0100 (CET)
From: Mantis Bug Tracker <admtlvitam@gmail.com>
To: <thierry.casimirius@intradef.gouv.fr>
Message-ID: <f05d35abce00316eb8b708d29d6c4515@213.32.79.242>
Subject: [Projet VITAM 0000054]: [API-access-external/v1/units
 -POST-Override-GET] : httpCode 405 - METHOD_NOT_ALLOWED sur
 $query/$match/EndDate
Keywords:  [Projet VITAM] BugFromTestlink
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_263_19215871.1517006384609"
X-Google-DKIM-Signature:  v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:date:to:from:subject:message-id:auto-submitted
         :keywords:mime-version:content-transfer-encoding;
        bh=s46wIvbbUwoG1zww+3XKf7x6NqtbIdqYs1bXce+k/rk=;
        b=Al/kCX0R2bqKijfiutdoSfSm/vItMK6LEZ41WwVRh7UajMSca/eH882UPcj3F1z2dw
         +6JW7aTPwaTbnK7znFaGrJi/1mqszbYDPtDGzIkCPHZuifK7sW93OkjPabtOmy3V3TzK
         WXroBk5zXghLpmT+rcZZAAjCpFX00ffUvTSPppahItBMXmYwAwrN4QWLvsLkF15SjLnw
         OGY/9SNJCfx0WlE9zsMhpYeREUhLWxg72ClWFD33fNv6SV/BMxQalTjq9+FDfLe/L1gt
         CkDsajO117IqCicPmWx4JFc675mMsQ05mcNMFVO9tRr2CPsOGcZdJ1tBQlftMb4yNyMY
         7gMQ==
X-Gm-Message-State:  AIkVDXLscsuMDhRFHEVsg4K0qAhNtPZfwLhJknNQi5rBpBGTchd8ZH5ihP7qap7dc4uRqA==
X-Received:  by 10.223.145.3 with SMTP id j3mr1468662wrj.51.1483717745127;
        Fri, 06 Jan 2017 07:49:05 -0800 (PST)
X-Priority:  3
X-Mailer:  PHPMailer 5.2.15 (https://github.com/PHPMailer/PHPMailer)
Auto-Submitted:  auto-generated
X-Auto-Response-Suppress:  All
X-PMX-Version:  6.3.1.2588712, Antispam-Engine: 2.7.2.2107409, Antispam-Data: 2017.1.6.153915
X-PMX-Spam:  Gauge=IIIIIIII, Probability=8%, Report='
 HTML_00_01 0.05, HTML_00_10 0.05, BODY_SIZE_4000_4999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, DKIM_SIGNATURE 0, FROM_NAME_PHRASE 0, IP_HTTP_ADDR 0, IP_HTTP_ADDR_WITH_PORT 0, SPF_PASS 0, URI_ENDS_IN_PHP 0, WEBMAIL_SOURCE 0, WEBMAIL_XMAILER 0, __ANY_URI 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __DQ_NEG_HEUR 0, __DQ_NEG_IP 0, __FRAUD_MONEY_CURRENCY 0, __FRAUD_MONEY_CURRENCY_DOLLAR 0, __FRAUD_WEBMAIL 0, __FRAUD_WEBMAIL_FROM 0, __FROM_GMAIL 0, __HAS_FROM 0, __HAS_MSGID 0, __HAS_X_MAILER 0, __HAS_X_PRIORITY 0, __HELO_GMAIL 0, __HIGHBITS 0, __HTTPS_URI 0, __MIME_TEXT_ONLY 0, __MIME_TEXT_P 0, __MIME_TEXT_P1 0, __MIME_VERSION 0, __MSGID_32HEX 0, __MULTIPLE_URI_TEXT 0, __NO_HTML_TAG_RAW 0, __PHISH_SPEAR_STRUCTURE_1 0, __PHISH_SPEAR_STRUCTURE_2 0, __RDNS_GMAIL 0, __SANE_MSGID 0, __STOCK_PHRASE_24 0, __TO_MALFORMED_2 0, __TO_NO_NAME 0, __URI_IN_BODY 0, __URI_NO_MAILTO 0,
 __URI_NO_WWW 0, __URI_WITH_PATH 0, __YOUTUBE_RCVD 0'
x-msw-original-dkim-signature:  v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=date:to:from:subject:message-id:auto-submitted:keywords
         :mime-version:content-transfer-encoding;
        bh=s46wIvbbUwoG1zww+3XKf7x6NqtbIdqYs1bXce+k/rk=;
        b=s6YPeqCQcqm+T6/2szgTtrXoT4TPfNQg30wGeoY/rclwDx2Zz2GGLH9xrCRla/1bqy
         DmfnsCtwEFJy5Oc5Y7IPez75rxDvTt0UiNL4R6wCbPfKZfXnkSaLiYWG5CgZ6mNF6TyQ
         ZFiOYEuey+LNaYQbVY5XXA7Tsp+0tOKvHkoXlvAqleGhtsjhrNIFrNdXxrg5WYFGIEhR
         8iHrBDIeNBnjTMpz3mzX5xIbzITFa1Zb5CWtnqZtgf0+H/Wacz59OdTif02ZGmj0FD80
         erHzShrwnqFgeJ2r3FYDd7SC51MDIS5xmfxxIIABDVl1x7tCB1s8FqvRNcWsViY1XL3B
         bAGw==
x-msw-jemd-spam:  unknown
x-msw-jemd-refid:  [1]50,0,0,,d41d8cd98f00b204,admtlvitam@gmail.com,thierry.casimirius@intradef.gouv.fr,RULES_HIT:41:152:355:379:493:509:541:543:836:882:967:973:982:988:989:1260:1261:1263:1277:1311:1313:1314:1345:1381:1437:1513:1515:1516:1518:1521:1535:1543:1593:1594:1711:1730:1747:1777:1792:1801:2393:2525:2565:2682:2685:2859:2901:2933:2937:2939:2942:2945:2947:2951:2954:3022:3138:3139:3140:3141:3142:3353:3653:3876:3877:3934:3936:3938:3941:3944:3947:3950:3953:3956:3959:4119:4250:4321:4605:5007:6114:6119:6261:6642:6653:6996:6997:7875:8599:8957:8987:9025:9121:9388:9413:10004:10400:10471:10849:11026:11233:11473:11658:11783:12043:12109:12114:12291:12438:12517:12519:12663:12679:12683:12740:13019:13025:13206:13229:13255:14093:14097:14110:14181:14687:14721:21063:21064:21080:21212:21444:30054:30080,0,RBL:209.85.210.194:@gmail.com:thierry.casimirius@intradef.gouv.fr.lbl8.mailshell.net-62.50.0.100 64.100.201.100;04ygsdo
X-MS-Exchange-Organization-AVStamp-Mailbox:  SMEXw]nP;1313700;0;This mail has
 been scanned by Trend Micro ScanMail for Microsoft Exchange;
X-MS-Exchange-Organization-SCL:  0
X-MS-Exchange-Organization-AuthSource: 
 MVLINF10CTNWM07.DR-RES.INTRADEF.GOUV.FR
X-MS-Exchange-Organization-AuthAs:  Anonymous

------=_Part_263_19215871.1517006384609
Content-Type: multipart/alternative; 
	boundary="----=_Part_264_22190435.1517006384609"

------=_Part_264_22190435.1517006384609
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Le bogue suivant a =C3=A9t=C3=A9 soumis.=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
http://213.32.79.242/mantisbt/view.php?id=3D54=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
Rapporteur:                 Omar
Responsable:                Omar
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
Projet:                     Projet VITAM
Bogue ID:                   54
Cat=C3=A9gorie:                  BugFromTestlink
Reproductibilit=C3=A9:           toujours
Impact:                     mineur
Priorit=C3=A9:                   normale
Statut:                     affect=C3=A9
Comportement attendu:       =20
US concern=C3=A9e:               =20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
Date de soumission:         2017-01-06 16:48 CET
Derni=C3=A8re modification:      2017-01-06 16:48 CET
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
R=C3=A9sum=C3=A9:                     [API-access-external/v1/units -POST-O=
verride-GET]
: httpCode 405 - METHOD_NOT_ALLOWED sur $query/$match/EndDate
Description:=20
La recherche par DescriptiveMetadataType via la balise EndDate ne fonctionn=
e
pas.
L'API retourne un httpCode 501, aulieu de retourner la/les Unit ayant un
crit=C3=A8re EndDate d=C3=A9sir=C3=A9.
Exemple sur le cas de test PVI-238:Obtenir une liste d'archives par
DescriptiveMetadataType via la balise EndDate

techniquement Lors du POST https://213.32.79.242:8444/access-external/v1/un=
its
avec X-Http-Method-Override: GET, l'api retourne une r=C3=A9ponse avec http=
Code 501
cf pj.



=C3=89tapes pour le reproduire:=20
Lancer une requ=C3=AAte sur l'API avec ceci=20
POST https://213.32.79.242:8444/access-external/v1/units HTTP/1.1
X-Http-Method-Override: GET
Content-Type: application/json
Accept: application/json
Content-Length: 158
Host: 213.32.79.242:8444
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

{
"$query": [
    {
    "$match" :
    {"EndDate"    : "2016-10-31T16:45:34"}
    =20
   =20
    }
  ],
  "$filter": {},
  "$action": [],
  "$projection": {
  }


Ou via le SOAP ALTRAN, lancer le cas de test ACC-01-000 \ Les balises
DescriptiveMetaType \PVI-238:Obtenir une liste d'archives par
DescriptiveMetadataType via la balise EndDat, avec ce JSON
{
"$query": [
    {
    "$match" :
    {"EndDate"    : "2016-10-31T16:45:34"}
    =20
   =20
    }
  ],
  "$filter": {},
  "$action": [],
  "$projection": {
  }
}
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20

Historique du bogue=20
Date de modificationNom d=E2=80=99utilisateurChamp                    Chang=
ement     =20
   =20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
2017-01-06 16:48 Omar           Nouveau bogue                              =
 =20
2017-01-06 16:48 Omar           Statut                   nouveau =3D> affec=
t=C3=A9 =20
2017-01-06 16:48 Omar           Assign=C3=A9 =C3=A0                 =3D> Om=
ar           =20
2017-01-06 16:48 Omar           Fichier ajout=C3=A9: PVI-238_06-01-2017-04-=
29_IN.csv
                  =20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
------=_Part_264_22190435.1517006384609--

------=_Part_263_19215871.1517006384609--
