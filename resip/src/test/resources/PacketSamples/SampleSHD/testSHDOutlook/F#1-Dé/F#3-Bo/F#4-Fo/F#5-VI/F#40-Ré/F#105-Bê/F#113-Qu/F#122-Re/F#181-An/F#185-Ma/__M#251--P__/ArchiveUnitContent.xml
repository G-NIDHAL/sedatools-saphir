<Content>
    <DescriptionLevel>Item</DescriptionLevel>
    <Title>[Projet VITAM 0000007]: [API-access-external/v1/units-PUT] : La balise réponse &quot;#diff&quot; ne contient pas systématiquement la balise modifiée</Title>
    <OriginatingSystemId>&lt;1a78231bfe95959176783cdb7084a5d8@213.32.79.242&gt;</OriginatingSystemId>
    <Writer>
        <FirstName>Mantis Bug Tracker</FirstName>
        <BirthName>Mantis Bug Tracker</BirthName>
        <Identifier>admtlvitam@gmail.com</Identifier>
    </Writer>
    <Addressee>
        <FirstName>thierry.casimirius</FirstName>
        <BirthName>thierry.casimirius</BirthName>
        <Identifier>thierry.casimirius@intradef.gouv.fr</Identifier>
    </Addressee>
    <SentDate>2016-12-09T10:35:49Z</SentDate>
    <ReceivedDate>2016-12-09T10:36:03Z</ReceivedDate>
    <TextContent>Le bogue suivant a été soumis. 
====================================================================== 
http://213.32.79.242/mantisbt/view.php?id=7 
====================================================================== 
Rapporteur:                 Omar
Responsable:                Omar
====================================================================== 
Projet:                     Projet VITAM
Bogue ID:                   7
Catégorie:                  VITAM
Reproductibilité:           toujours
Impact:                     mineur
Priorité:                   normale
Statut:                     affecté
Comportement attendu:        
US concernée:                
====================================================================== 
Date de soumission:         2016-12-09 11:35 CET
Dernière modification:      2016-12-09 11:35 CET
====================================================================== 
Résumé:                     [API-access-external/v1/units-PUT] : La balise
réponse &quot;#diff&quot; ne contient pas systématiquement la balise modifiée
Description: 
lors de mise à jour d&apos;un titre via la reqquête suivante :

PUT
https://213.32.79.242:8444/access-external/v1/units/aeaaaaaaaaaam7mxaaekoaky2uk7n7iaaaaq
HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: application/json
X-Http-Method-Override: GET
charset: UTF-8
Accept: application/json


{
	&quot;$roots&quot;:[],
	&quot;$query&quot;:
			[],
	&quot;$filter&quot;:
	{
		&quot;$orderby&quot;:
		{
			&quot;TransactedDate&quot;:1}},
	&quot;$action&quot;:
					[
			{
				&quot;$set&quot;:
				{
					&quot;Title&quot;:&quot;g_Title_DEFAUT&quot;}}]}

..
Le JSON de la réponse ne contient pas systématiquement dans la balise &quot;#diff&quot;:
&quot; l&apos;item modifié (ie ici  &quot;#diff&quot;: &quot;-  Title : g_Title_DEFAUT.....).

A noter que cela peut être un comportement &quot;normal&quot; de la part de VITAM si on
lance cette même requête deux fois de suite, il serait donc logique de ne pas
re re modifier car l&apos;ancienne valeur et la nouvelle sont les mêmes.
Or si on lance cette même requête via un autre &quot;canal&quot; (ex via soap-ui sur un
autre niveau avec exactement la même requête JSON) la balise est renvoyée
même si l&apos;ancien titre et le nouveau sont les mêmes ! 
====================================================================== 

Historique du bogue 
Date de modificationNom d’utilisateurChamp                    Changement      
    
====================================================================== 
2016-12-09 11:35 Omar           Nouveau bogue                                
2016-12-09 11:35 Omar           Statut                   nouveau =&gt; affecté  
2016-12-09 11:35 Omar           Assigné à                 =&gt; Omar            
======================================================================</TextContent>
</Content>