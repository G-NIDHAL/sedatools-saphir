Return-Path: admtlvitam@gmail.com
Received:  from 213.32.79.242 ([213.32.79.242]) by smtp.gmail.com with ESMTPSA
     id i132sm12240551wmf.14.2016.12.15.04.40.56 for
     <thierry.casimirius@intradef.gouv.fr>     (version=TLS1_2
 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128); Thu,     15 Dec 2016
 04:40:56 -0800 (PST)
Date: Thu, 15 Dec 2016 13:40:58 +0100 (CET)
From: Mantis Bug Tracker <admtlvitam@gmail.com>
To: <thierry.casimirius@intradef.gouv.fr>
Message-ID: <5b8a58562116ab66da359e2a7315c16c@213.32.79.242>
Subject: =?UTF-8?Q?[Projet_VITAM_0000017]:_Impossibilit=C3=A9_d'utili?=
 =?UTF-8?Q?ser_l'op=C3=A9rateur_$and_dans_la_collection_Rules?=
Keywords:  [Projet VITAM] BugFromTestlink
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_339_7500697.1517006385019"
X-Google-DKIM-Signature:  v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; 
    s=20161025; 
    h=x-gm-message-state:date:to:from:subject:message-id:auto-submitted 
    :keywords:mime-version:content-transfer-encoding; 
    bh=ArrADejRxHfLDJAD1ge2cItOZzqpJUiV+6ql3mlvo88=; 
    b=VHU9JeEGBWU8KlpiDQ1+qeCHC6VYXGSBtYawQdcoKzZP4LsScUYkmDXYsNSl7D1c5+ 
    HA/CYE8OzWAHAlFNk9AHgmVCtpbMMJ6ceBjzPFTvta/1HEkVCy8zsoo8ougfQuPlKEM8 
    z/1D/0e/pdKiX0aPV0XyGvRH7uzh+qCB2OYLMGU7xSRh8BvSwiBBNreggw88qTnNeKyi 
    yqruoEaobhppQV5efLCWlCW865liBAAv17TZlBLYUQ0UJyXC6IYYV93RZmA5GhgbOQuF 
    yjaZtnsPp/Rd1LSRK+eVNKM1ZXsAxrFjKANyTlnOPntqIi3uh0ZeLykucEqLO1ImxCVn 
    FK+Q==
X-Gm-Message-State:  AIkVDXJznvXPkEJclPsnLHi/LiL4AF3orrcKnhrpvCgdasjD+L6CnJFGBnuwmcv3HWbMPg==
X-Received:  by 10.28.57.193 with SMTP id g184mr1229962wma.122.1481805657097; 
    Thu, 15 Dec 2016 04:40:57 -0800 (PST)
X-Priority:  3
X-Mailer:  PHPMailer 5.2.15 (https://github.com/PHPMailer/PHPMailer)
Auto-Submitted:  auto-generated
X-Auto-Response-Suppress:  All
X-PMX-Version:  6.3.1.2588712, Antispam-Engine: 2.7.2.2107409, Antispam-Data: 
    2016.12.15.123316
X-PMX-Spam:  Gauge=IIIIIIII, Probability=8%, Report=' UTF8_SUBJ_OBFU 0.1, 
    HTML_00_01 0.05, HTML_00_10 0.05, BODY_SIZE_4000_4999 0, 
    BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, DKIM_SIGNATURE 0, 
    FROM_NAME_PHRASE 0, IP_HTTP_ADDR 0, NO_URI_HTTPS 0, 
    SINGLE_URI_IN_BODY 0, SPF_PASS 0, URI_ENDS_IN_PHP 0, WEBMAIL_SOURCE 0,
     WEBMAIL_XMAILER 0, __ANY_URI 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, 
    __CT_TEXT_PLAIN 0, __DQ_NEG_HEUR 0, __DQ_NEG_IP 0, 
    __FRAUD_MONEY_CURRENCY 0, __FRAUD_MONEY_CURRENCY_DOLLAR 0, 
    __FRAUD_WEBMAIL 0, __FRAUD_WEBMAIL_FROM 0, __FROM_GMAIL 0, __HAS_FROM 
    0, __HAS_MSGID 0, __HAS_X_MAILER 0, __HAS_X_PRIORITY 0, __HELO_GMAIL 
    0, __HIGHBITS 0, __MIME_TEXT_ONLY 0, __MIME_TEXT_P 0, __MIME_TEXT_P1 
    0, __MIME_VERSION 0, __MSGID_32HEX 0, __NO_HTML_TAG_RAW 0, 
    __PHISH_SPEAR_STRUCTURE_1 0, __PHISH_SPEAR_STRUCTURE_2 0, 
    __RDNS_GMAIL 0, __SANE_MSGID 0, __SINGLE_URI_TEXT 0, 
    __STOCK_PHRASE_24 0, __SUBJ_ALPHA_END 0, __SUBJ_ALPHA_END2 0, 
    __SUBJ_HIGHBIT 0, __TO_MALFORMED_2 0, __TO_NO_NAME 0, __URI_IN_BODY 0,
     __URI_NO_MAILTO 0, __URI_NO_WWW 0, __URI_WITH_PATH 0, __UTF8_SUBJ 0, 
    __YOUTUBE_RCVD 0'
x-msw-original-dkim-signature:  v=1; a=rsa-sha256; c=relaxed/relaxed; 
    d=gmail.com; s=20161025; 
    h=date:to:from:subject:message-id:auto-submitted:keywords 
    :mime-version:content-transfer-encoding; 
    bh=ArrADejRxHfLDJAD1ge2cItOZzqpJUiV+6ql3mlvo88=; 
    b=tKFWatGBjMQKpFJ3OFf+rj1U886qSwZFYpneX/2b0uVGu55+AjRHjc+ZSAjrp9micK 
    LKxkZU4J4VMZaJjLmgu1814My9VoTeU10hsTA4S7IJlDsphmwwbngGZcLO6JD0Il5OCY 
    c2lJbKPztwoGTh9JVtEWNazhthb12vOKs3qbLnngFu8jSvhXY19g1jDRz/fcMgespwyO 
    IHXXMl7tqN1yqvmVkcNhq7dzUhs8b/nvwbqVJgKfDEoQs/j9oGO9bI15xFTn9aqsdl0n 
    QwFKVO/YuOcJixh/nbtqvs5U+MrSL2pSRLY0xqSaPvmurZifXt8hEDoptV/RyctqtVId 
    h1Mw==
x-msw-jemd-spam:  unknown
x-msw-jemd-refid:  [1]10,1,0,,d41d8cd98f00b204,admtlvitam@gmail.com,thierry.casimirius@intradef.gouv.fr,RULES_HIT:41:46:150:152:355:379:493:541:543:836:882:967:973:982:988:989:1260:1261:1263:1277:1311:1313:1314:1345:1381:1437:1513:1515:1516:1518:1521:1535:1542:1593:1594:1711:1730:1747:1777:1792:1801:2198:2199:2393:2525:2560:2563:2682:2685:2859:2933:2937:2939:2942:2945:2947:2951:2954:3022:3138:3139:3140:3141:3142:3353:3653:3868:3934:3936:3938:3941:3944:3947:3950:3953:3956:3959:4119:4321:4605:5007:6261:6653:6996:6997:8599:8957:8987:9025:9121:9388:9413:10004:10400:10471:11233:11473:11658:11783:12043:12114:12291:12517:12519:12663:12679:12683:12740:13025:13191:13192:13206:13229:13255:14093:14097:14110:14181:14687:14721:21063:21080:21444:30054:30075:30080,0,RBL:100.78.17.73:@gmail.com:thierry.casimirius@intradef.gouv.fr.lbl8.mailshell.net-62.16.255.100 64.201.201.201;04ygf5pg56zoepzie9r4re9bm4cgmocru9a76dm1deuomiuy
X-MS-Exchange-Organization-AVStamp-Mailbox:  SMEXw]nP;1295900;0;This mail has
 been scanned by Trend Micro ScanMail for Microsoft Exchange;
X-MS-Exchange-Organization-SCL:  0
X-MS-Exchange-Organization-AuthSource: 
 MVLINF10CTNWM08.DR-RES.INTRADEF.GOUV.FR
X-MS-Exchange-Organization-AuthAs:  Anonymous

------=_Part_339_7500697.1517006385019
Content-Type: multipart/alternative; 
	boundary="----=_Part_340_26919092.1517006385019"

------=_Part_340_26919092.1517006385019
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Le bogue suivant a =C3=A9t=C3=A9 soumis.=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
http://213.32.79.242/mantisbt/view.php?id=3D17=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
Rapporteur:                 Jonathan
Responsable:                Jonathan
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
Projet:                     Projet VITAM
Bogue ID:                   17
Cat=C3=A9gorie:                  BugFromTestlink
Reproductibilit=C3=A9:           toujours
Impact:                     majeur
Priorit=C3=A9:                   normale
Statut:                     affect=C3=A9
Comportement attendu:       =20
US concern=C3=A9e:               =20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
Date de soumission:         2016-12-15 13:40 CET
Derni=C3=A8re modification:      2016-12-15 13:40 CET
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
R=C3=A9sum=C3=A9:                     Impossibilit=C3=A9 d'utiliser l'op=C3=
=A9rateur $and dans
la collection Rules
Description:=20
Nous cherchons a obtenir la liste des r=C3=A8gles de type AccessRule et qui=
 ont une
valeur 75 dans le champs RuleDuration via cette requ=C3=AAte  :=20
{
  "$query":
    {
      "$and": [
        {
          "$eq": {
            "RuleType": "AccessRule"
          }
        },
        {
          "$eq": {
            "RuleDuration": "75"
          }
        }
      ]
    }
,
  "$filter": {},
  "$projection": {}
}

Nous obtenons a chaque tentative une erreur 500
Nous avons essay=C3=A9 la m=C3=AAme requ=C3=AAte mais avec un "$or" =C3=A0 =
la place du "$and" et
nous obtenons bien comme r=C3=A9sultat toutes les AccessRule et toutes les =
r=C3=A8gles
avec une Duration de 75

Dans d'autre collection nous avons tester la balise "$and" avec succ=C3=A8s=
 :
{
  "$roots": [],
  "$query": [
    {
      "$and": [
        {
          "$match": {
            "Title": "api"
          }
        },
        {
          "$match": {
            "Description": "Vitam"
          }
        }
      ],
      "$depth": 20
    }
  ],
  "$filter": {
    "$orderby": {
      "TransactedDate": 1
    }
  },
  "$projection": {}
}

Informations compl=C3=A9mentaires:=20
PVI-470
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20

Historique du bogue=20
Date de modificationNom d=E2=80=99utilisateurChamp                    Chang=
ement     =20
   =20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
2016-12-15 13:40 Jonathan       Nouveau bogue                              =
 =20
2016-12-15 13:40 Jonathan       Statut                   nouveau =3D> affec=
t=C3=A9 =20
2016-12-15 13:40 Jonathan       Assign=C3=A9 =C3=A0                 =3D> Jo=
nathan       =20
2016-12-15 13:40 Jonathan       Fichier ajout=C3=A9:
PVI-470_15-12-2016-01-40_OUT.json                   =20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
------=_Part_340_26919092.1517006385019--

------=_Part_339_7500697.1517006385019--
