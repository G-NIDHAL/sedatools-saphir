Return-Path: admtlvitam@gmail.com
Received:  from 213.32.79.242 ([213.32.79.242])        by smtp.gmail.com with
 ESMTPSA id 63sm18494322wmg.2.2017.01.09.03.54.27        for
 <thierry.casimirius@intradef.gouv.fr>        (version=TLS1_2
 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);        Mon, 09 Jan 2017
 03:54:27 -0800 (PST)
Date: Mon, 9 Jan 2017 12:54:28 +0100 (CET)
From: Mantis Bug Tracker <admtlvitam@gmail.com>
To: <thierry.casimirius@intradef.gouv.fr>
Message-ID: <e0992b8c01f3564b9a6649c3c990e783@213.32.79.242>
Subject: [Projet VITAM 0000056]: [API-access-external/v1/units/{idu}/object]
 :Retour avec "httpCode": 406,  "message": "HTTP 406 Not Acceptable" au lieu
 de 200
Keywords:  [Projet VITAM] BugFromTestlink
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_259_25349174.1517006384589"
X-Google-DKIM-Signature:  v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:date:to:from:subject:message-id:auto-submitted
         :keywords:mime-version:content-transfer-encoding;
        bh=RpoxVYrYuA9Up3IH2h0G9J0QuoVm+4saFpBxDvGqDCk=;
        b=h4FQrA0bfNFTJnzsdboXrnVGOi3Pv2fXYYcurkietRVIHxWxEbunUe1dWxu8Z18CRu
         vbiBwBzEcdJlLNyjEw+BX1LP/d/ZjO1WRI7S7Pk67tfQHjJ/7mfAT5VrjMzjZBWRIEkt
         cJ0IHjep923XtshgCD+742lfKdrFsDDHTqFcht7EclTS5YZjG18t2M60yV/Fqnbb5j+P
         rict+gBQKLyR14MUnLFYfuHFDXIutQiWkZI07NsprI2A7fzA63+Mwnf2eUcPw0xml/Qk
         nzylAYujBbM6VY2ZViKtmos8CIAaHrHk74oW9j4+nZOi6zHz0JvR736RKA21Rbtf5I70
         SYzg==
X-Gm-Message-State:  AIkVDXJkP3P97Md3YibtC6yC0YGemQbOQdZnbk4awnHQc+tQM1i2DUsljbdVO9Ks794r9Q==
X-Received:  by 10.223.133.5 with SMTP id 5mr11882597wrh.104.1483962868583;
        Mon, 09 Jan 2017 03:54:28 -0800 (PST)
X-Priority:  3
X-Mailer:  PHPMailer 5.2.15 (https://github.com/PHPMailer/PHPMailer)
Auto-Submitted:  auto-generated
X-Auto-Response-Suppress:  All
X-PMX-Version:  6.3.1.2588712, Antispam-Engine: 2.7.2.2107409, Antispam-Data: 2017.1.9.114515
X-PMX-Spam:  Gauge=IIIIIIII, Probability=8%, Report='
 HTML_00_01 0.05, HTML_00_10 0.05, BODY_SIZE_4000_4999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, DKIM_SIGNATURE 0, FROM_NAME_PHRASE 0, IP_HTTP_ADDR 0, IP_HTTP_ADDR_WITH_PORT 0, SPF_PASS 0, URI_ENDS_IN_PHP 0, WEBMAIL_SOURCE 0, WEBMAIL_XMAILER 0, __ANY_URI 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __DQ_NEG_HEUR 0, __DQ_NEG_IP 0, __FRAUD_MONEY_CURRENCY 0, __FRAUD_MONEY_CURRENCY_DOLLAR 0, __FRAUD_WEBMAIL 0, __FRAUD_WEBMAIL_FROM 0, __FROM_GMAIL 0, __HAS_FROM 0, __HAS_MSGID 0, __HAS_X_MAILER 0, __HAS_X_PRIORITY 0, __HELO_GMAIL 0, __HIGHBITS 0, __HTTPS_URI 0, __MIME_TEXT_ONLY 0, __MIME_TEXT_P 0, __MIME_TEXT_P1 0, __MIME_VERSION 0, __MSGID_32HEX 0, __MULTIPLE_URI_TEXT 0, __NO_HTML_TAG_RAW 0, __PHISH_SPEAR_STRUCTURE_1 0, __PHISH_SPEAR_STRUCTURE_2 0, __RDNS_GMAIL 0, __SANE_MSGID 0, __STOCK_PHRASE_24 0, __TO_MALFORMED_2 0, __TO_NO_NAME 0, __URI_IN_BODY 0, __URI_NO_MAILTO 0,
 __URI_NO_WWW 0, __URI_WITH_PATH 0, __YOUTUBE_RCVD 0'
x-msw-original-dkim-signature:  v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=date:to:from:subject:message-id:auto-submitted:keywords
         :mime-version:content-transfer-encoding;
        bh=RpoxVYrYuA9Up3IH2h0G9J0QuoVm+4saFpBxDvGqDCk=;
        b=BJjebPhkCf07FdYUDEYfleV28WMEXr2cHzIiLXkndpLYEg/ETtLQJgPciI8VnBfLt0
         1X5Q+aSbhNg/IboB5yyfvBNH1lx21O3KkcpKPIFFocnLgKxiiEyX9OTmXHwwJYIlkG0y
         WcQbH1PsH6/ZoXSB04iRcyXP92wFZYf97KvyZPIf/BGdriXMesw0WhUDv2lNlCWRuBnP
         vVszcOjjJiaBPscLCkSS8vNHHfGWXM+bVhMFc9213GCm7bKrwgafG1dEZ3xsYQ9kO+P1
         JlmeOkHz0dS46oHwxOqxgq0sVbOarXm7wOllTnskvS0yJJ5nayx3E+4LWeWL/WYe5nkA
         0zgQ==
x-msw-jemd-spam:  unknown
x-msw-jemd-refid:  [1]50,0,0,,d41d8cd98f00b204,admtlvitam@gmail.com,thierry.casimirius@intradef.gouv.fr,RULES_HIT:41:152:355:379:493:509:541:543:836:882:967:973:982:988:989:1260:1261:1263:1277:1311:1313:1314:1345:1381:1437:1513:1515:1516:1518:1521:1535:1543:1593:1594:1711:1730:1747:1777:1792:1801:2393:2525:2553:2561:2564:2682:2685:2859:2901:2933:2937:2939:2942:2945:2947:2951:2954:3022:3138:3139:3140:3141:3142:3353:3876:3877:3934:3936:3938:3941:3944:3947:3950:3953:3956:3959:4120:4250:4321:4605:5007:6114:6117:6119:6238:6261:6642:6653:6996:6997:8599:8957:8985:8987:9025:9121:9388:9413:10004:10400:10471:10849:11026:11233:11473:11658:11783:12043:12114:12262:12266:12291:12438:12517:12519:12555:12663:12679:12683:12740:13018:13019:13025:13095:13180:13191:13192:13206:13229:13255:13548:13870:14093:14097:14110:14181:14687:14721:21063:21064:21080:21212:21433:21444:21451:30012:30029:30045:30054:30075:30080:30090:30091,0,RB
X-MS-Exchange-Organization-AVStamp-Mailbox:  SMEXw]nP;1314500;0;This mail has
 been scanned by Trend Micro ScanMail for Microsoft Exchange;
X-MS-Exchange-Organization-SCL:  0
X-MS-Exchange-Organization-AuthSource: 
 MVLINF10CTNWM07.DR-RES.INTRADEF.GOUV.FR
X-MS-Exchange-Organization-AuthAs:  Anonymous

------=_Part_259_25349174.1517006384589
Content-Type: multipart/alternative; 
	boundary="----=_Part_260_18430409.1517006384589"

------=_Part_260_18430409.1517006384589
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Le bogue suivant a =C3=A9t=C3=A9 soumis.=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
http://213.32.79.242/mantisbt/view.php?id=3D56=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
Rapporteur:                 Omar
Responsable:                Omar
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
Projet:                     Projet VITAM
Bogue ID:                   56
Cat=C3=A9gorie:                  BugFromTestlink
Reproductibilit=C3=A9:           toujours
Impact:                     majeur
Priorit=C3=A9:                   =C3=A9lev=C3=A9e
Statut:                     affect=C3=A9
Comportement attendu:       =20
US concern=C3=A9e:               =20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
Date de soumission:         2017-01-09 12:54 CET
Derni=C3=A8re modification:      2017-01-09 12:54 CET
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
R=C3=A9sum=C3=A9:                     [API-access-external/v1/units/{idu}/o=
bject]
:Retour avec "httpCode": 406,  "message": "HTTP 406 Not Acceptable" au lieu=
 de
200
Description:=20
Lorsque l'on envoie une requ=C3=AAte afin de r=C3=A9cup=C3=A9rer une unit o=
u une liste de
units, l'API retourne un httpCode 406au lieu de HTTP 200.

exemple :
POST
https://213.32.79.242:8444/access-external/v1/units/aeaaaaaaaaaam7mxaayieak=
zqlkgbsiaaaaq/object
HTTP/1.1
X-Http-Method-Override: GET
Accept: application/json
Content-Type: application/json
Content-Length: 72
Host: 213.32.79.242:8444
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

{
  "$roots": [],
  "$query": [],
  "$filter": {},
  "$projection": {}
}

le retour de l'API est le suivant :


HTTP/1.1 406 Not Acceptable
Date: Mon, 09 Jan 2017 11:48:42 GMT
Set-Cookie: rememberMe=3DdeleteMe; Path=3D/; Max-Age=3D0; Expires=3DSun, 08=
-Jan-2017
11:48:42 GMT
Content-Type: application/json
X-REQUEST-ID: aeeaaaaaacaam7mxabapkakzqkgld7qaaaba
Content-Length: 260
Server: Jetty(9.3.13.v20161014)

{"httpCode":406,"code":"000200","context":"{\"Name\":\"vitam-tra1.localdoma=
in\",\"Role\":\"access-external\",\"PlatformId\":425367}","state":"GLOBAL_I=
NTERNAL_SERVER_ERROR","message":"HTTP
406 Not Acceptable","description":"HTTP 406 Not Acceptable","errors":[]}




en pi=C3=A8ce jointe le SIP ins=C3=A9r=C3=A9 avec l'ATR OK ainsi que la lis=
te des id AU que
l'on a tent=C3=A9.
Note la recherche via IHM fonctionne sur l'AU "r=C3=A9pertoire" ou "fichier=
"

=C3=89tapes pour le reproduire:=20
Via SOAP UI, Lancer le cas de Test ACC-01-000 \ T=C3=A9l=C3=A9charger un fi=
chier \
PVI-715:T=C3=A9l=C3=A9charger un SIP 1 trouv=C3=A9 via une recherche API
en initialisant le de g_#ID aux valeur des AU ID de l'ATR en pi=C3=A8ce joi=
nte

Informations compl=C3=A9mentaires:=20
cette interrogation ne fonctionnait pas non dans la version ALPHA
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20

Historique du bogue=20
Date de modificationNom d=E2=80=99utilisateurChamp                    Chang=
ement     =20
   =20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
2017-01-09 12:54 Omar           Nouveau bogue                              =
 =20
2017-01-09 12:54 Omar           Statut                   nouveau =3D> affec=
t=C3=A9 =20
2017-01-09 12:54 Omar           Assign=C3=A9 =C3=A0                 =3D> Om=
ar           =20
2017-01-09 12:54 Omar           Fichier ajout=C3=A9: ATR_SIP-20170109114257=
.xml    =20
             =20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
------=_Part_260_18430409.1517006384589--

------=_Part_259_25349174.1517006384589--
