Return-Path: admtlvitam@gmail.com
Received:  from 213.32.79.242 ([213.32.79.242]) by smtp.gmail.com with ESMTPSA
     id f10sm31137977wjl.28.2016.12.21.07.58.09 for
     <thierry.casimirius@intradef.gouv.fr>     (version=TLS1_2
 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128); Wed,     21 Dec 2016
 07:58:09 -0800 (PST)
Date: Wed, 21 Dec 2016 16:58:12 +0100 (CET)
From: Mantis Bug Tracker <admtlvitam@gmail.com>
To: <thierry.casimirius@intradef.gouv.fr>
Message-ID: <96afc83ea92c94dbbe242517e01931eb@213.32.79.242>
Subject: =?UTF-8?Q?[Projet_VITAM_0000029]:_Impossible_d'effectuer_u?=
 =?UTF-8?Q?ne_requ=C3=AAte_avec_le_DSL_sur_la_collection_OBJECTS?=
Keywords:  [Projet VITAM] BugFromTestlink
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_313_30121141.1517006384886"
X-Google-DKIM-Signature:  v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; 
    s=20161025; 
    h=x-gm-message-state:date:to:from:subject:message-id:auto-submitted 
    :keywords:mime-version:content-transfer-encoding; 
    bh=1x0NZcgA/Elz+LGzzEzTNHzQnEllJFhlv8FDgwTVJMQ=; 
    b=jI4R2pCtS3FV17JZ7a8kJtE0X57iGTIzhLIWaoUAloHkcdBq4iTWxbM92n1IP1d5jt 
    LhmJ/GItjGcUEP1LtRQ2mnNDgegU7lwJjBennfrWSpETr4zkU+yGd+RixRs6vdQzgXd9 
    MnlKXNBrLD1yElJgefQEi9rFsH9pmaRQUfX22Sth9UHV72t7090SobSdfGk9U6rBT2EF 
    GkpqEuTjS8y0A9GHaG9tO4/xmnT/uqeH8kUIxbnJpm9cg3TOu+C5C6bGNwnu1/a72+p9 
    YjfLfjTQ2hZNYqvObsKmB/XLslaK75tOLE/IytoENM2zPCMT3bHvz2tThet/pOWSnT7u 
    aMMg==
X-Gm-Message-State:  AIkVDXLzLVMR8lb/1pMSCGgvKbP2A7AaVTA3gY82ntUVODSxfgOKehn+ZRWSeKF3+BA3DQ==
X-Received:  by 10.28.69.91 with SMTP id s88mr7392005wma.18.1482335890541; Wed,
     21 Dec 2016 07:58:10 -0800 (PST)
X-Priority:  3
X-Mailer:  PHPMailer 5.2.15 (https://github.com/PHPMailer/PHPMailer)
Auto-Submitted:  auto-generated
X-Auto-Response-Suppress:  All
X-PMX-Version:  6.3.1.2588712, Antispam-Engine: 2.7.2.2107409, Antispam-Data: 
    2016.12.21.154816
X-PMX-Spam:  Gauge=IIIIIIII, Probability=8%, Report=' UTF8_SUBJ_OBFU 0.1, 
    HTML_00_01 0.05, HTML_00_10 0.05, DKIM_SIGNATURE 0, FROM_NAME_PHRASE 
    0, IP_HTTP_ADDR 0, IP_HTTP_ADDR_WITH_PORT 0, SPF_PASS 0, 
    URI_ENDS_IN_PHP 0, WEBMAIL_SOURCE 0, WEBMAIL_XMAILER 0, __ANY_URI 0, 
    __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __DQ_NEG_HEUR 
    0, __DQ_NEG_IP 0, __FRAUD_MONEY 0, __FRAUD_MONEY_CURRENCY 0, 
    __FRAUD_MONEY_CURRENCY_DOLLAR 0, __FRAUD_MONEY_DENOMINATION 0, 
    __FRAUD_MONEY_VALUE 0, __FRAUD_WEBMAIL 0, __FRAUD_WEBMAIL_FROM 0, 
    __FROM_GMAIL 0, __HAS_FROM 0, __HAS_MSGID 0, __HAS_X_MAILER 0, 
    __HAS_X_PRIORITY 0, __HELO_GMAIL 0, __HIGHBITS 0, __HTTPS_URI 0, 
    __MIME_TEXT_ONLY 0, __MIME_TEXT_P 0, __MIME_TEXT_P1 0, __MIME_VERSION 
    0, __MSGID_32HEX 0, __MULTIPLE_URI_TEXT 0, __NO_HTML_TAG_RAW 0, 
    __PHISH_SPEAR_STRUCTURE_1 0, __RDNS_GMAIL 0, __SANE_MSGID 0, 
    __STOCK_PHRASE_24 0, __SUBJ_ALPHA_END 0, __SUBJ_ALPHA_END2 0, 
    __SUBJ_HIGHBIT 0, __TO_MALFORMED_2 0, __TO_NO_NAME 0, __URI_IN_BODY 0,
     __URI_NO_MAILTO 0, __URI_NO_WWW 0, __URI_WITH_PATH 0, __UTF8_SUBJ 0, 
    __YOUTUBE_RCVD 0'
x-msw-original-dkim-signature:  v=1; a=rsa-sha256; c=relaxed/relaxed; 
    d=gmail.com; s=20161025; 
    h=date:to:from:subject:message-id:auto-submitted:keywords 
    :mime-version:content-transfer-encoding; 
    bh=1x0NZcgA/Elz+LGzzEzTNHzQnEllJFhlv8FDgwTVJMQ=; 
    b=S4I+u/vrMQygZPVUpjE3GQLR5zvpkN5GPvUVR2OXDp3s1Edx6g+vH8aXJM3fjwO4lz 
    54TTJBtfox+UGzPc6B2e0nd0zNDSaFlfWQvnOTgBYpzuqL5AfAfjpeo/ChDejDIZwEel 
    DBtJ2ixlUp6yY1i/8yPfe41xiBJ6wBSQ1Eihpvrk/dU06GTSUSaP8QigQ1lN3r5CW7VW 
    kCTMoMhGbNcOCnO1nYCtLzaNtZr/JGpAPxpGDNTg5+2Bv2Cu3iQuFwiBEfhRB15cEGqb 
    UPPN3Lfe2RReCoBbi7nsaT/a/Fp5E6OH4s2HQsMr37mIwH3fI0tMo6NwNREwoP0vdjt8 
    lZ8w==
x-msw-jemd-spam:  unknown
x-msw-jemd-refid:  [1]10,1,0,,d41d8cd98f00b204,admtlvitam@gmail.com,thierry.casimirius@intradef.gouv.fr,RULES_HIT:1:2:41:46:150:152:355:379:493:509:541:543:836:882:967:973:982:988:989:1260:1261:1263:1277:1311:1313:1314:1345:1381:1437:1513:1515:1516:1518:1521:1593:1594:1730:1747:1777:1792:1801:2198:2199:2393:2525:2553:2565:2682:2685:2859:2901:2933:2937:2939:2942:2945:2947:2951:2954:3022:3138:3139:3140:3141:3142:3354:3876:3877:3934:3936:3938:3941:3944:3947:3950:3953:3956:3959:4049:4250:4321:4605:5007:6114:6119:6238:6261:6642:6653:6996:6997:7688:7875:8599:8603:8957:8985:8987:9025:9121:9388:9413:10004:10849:11026:11233:11473:11658:11783:11984:12043:12114:12262:12291:12438:12517:12519:12555:12663:12679:12683:12740:13025:13206:13229:13255:13870:14110:14687:21063:21064:21080:21433:21444:30012:30045:30054:30080:30090:30091,0,RBL:74.125.82.65:@gmail.com:thierry.casimirius@intradef.gouv.fr.lbl8.mailshell.net-62.50.0.10
X-MS-Exchange-Organization-AVStamp-Mailbox:  SMEXw]nP;1310700;0;This mail has
 been scanned by Trend Micro ScanMail for Microsoft Exchange;
X-MS-Exchange-Organization-SCL:  0
X-MS-Exchange-Organization-AuthSource: 
 MVLINF10CTNWM02.DR-RES.INTRADEF.GOUV.FR
X-MS-Exchange-Organization-AuthAs:  Anonymous

------=_Part_313_30121141.1517006384886
Content-Type: multipart/alternative; 
	boundary="----=_Part_314_20064939.1517006384886"

------=_Part_314_20064939.1517006384886
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Le bogue suivant a =C3=A9t=C3=A9 soumis.=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
http://213.32.79.242/mantisbt/view.php?id=3D29=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
Rapporteur:                 Blaise
Responsable:                Blaise
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
Projet:                     Projet VITAM
Bogue ID:                   29
Cat=C3=A9gorie:                  BugFromTestlink
Reproductibilit=C3=A9:           toujours
Impact:                     majeur
Priorit=C3=A9:                   normale
Statut:                     affect=C3=A9
Comportement attendu:       =20
US concern=C3=A9e:               =20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
Date de soumission:         2016-12-21 16:58 CET
Derni=C3=A8re modification:      2016-12-21 16:58 CET
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
R=C3=A9sum=C3=A9:                     Impossible d'effectuer une requ=C3=AA=
te avec le DSL
sur la collection OBJECTS
Description:=20
Depuis SAOPUI, nous devez ex=C3=A9cuter une requ=C3=AAte avec le DSL sur la=
 collection
OBJECTS. =20
Exemple de balises =C3=A0 interroger : "#id", "Title" ou "FileInfo.Filename=
".

=C3=89tapes pour le reproduire:=20
A partir de l'outil SOAPUI, ex=C3=A9cutez la requ=C3=AAte ci-apr=C3=A8s :

1- Interrogation de la collection OBJECTS via l'ex=C3=A9cution de la requ=
=C3=AAte
ci-apr=C3=A8s :=20

POST
https://213.32.79.242:8444/access-external/v1/objects/aeaaaaaaaaaam7mxabmk4=
akzdo5kbtqaaaba
HTTP/1.1
Accept-Encoding: gzip,deflate
X-Http-Method-Override: GET
Content-Type: application/json
Accept: application/json
Content-Length: 141
Host: 213.32.79.242:8444
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

{
  "$roots": [],
  "$query": [
   =20
  ],
  "$filter": {
    "$orderby": {
      "TransactedDate": 1
    }
  },
  "$projection": {
   =20
  }
}

R=C3=A9sultat de la requ=C3=AAte
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

{
   "$hits":    {
      "total": 1,
      "offset": 0,
      "limit": 1,
      "size": 1
   },
   "$results": [   {
      "FileInfo":       {
         "Filename": "SHDMC_REP_1A_V2009.pdf",
         "LastModified": "2015-11-10T12:12:30.000+01:00"
      },
      "#id": "aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba",
      "#nbobjects": 0,
      "#qualifiers":       {
         "BinaryMaster":          {
            "_nbc": 1,
            "versions": [            {
               "_id": "aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaaq",
               "DataObjectGroupId": "aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba",
               "DataObjectVersion": "BinaryMaster_1",
               "FormatIdentification":                {
                  "FormatLitteral": "Acrobat PDF 1.4 - Portable Document
Format",
                  "MimeType": "application/pdf",
                  "FormatId": "fmt/18"
               },
               "FileInfo":                {
                  "Filename": "SHDMC_REP_1A_V2009.pdf",
                  "LastModified": "2015-11-10T12:12:30.000+01:00"
               },
               "Size": 102887,
               "Uri": "Content/ID5.pdf",
               "MessageDigest":
"eb43f029e26ce2e4f5660e095db7efd4b924adbaf7b8966a765b595958c5b0a10e2c6fd7a5=
714634b3cc673d3da249284339a88bff89ccdfd2ea7d4821d79b86",
               "Algorithm": "SHA-512"
            }]
         },
         "Thumbnail":          {
            "_nbc": 1,
            "versions": [            {
               "_id": "aeaaaaaaaaaam7mxabmk4akzdo5kb3aaaaaq",
               "DataObjectGroupId": "aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba",
               "DataObjectVersion": "Thumbnail_1",
               "FormatIdentification":                {
                  "FormatLitteral": "Microsoft Excel for Windows",
                  "MimeType":
"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
                  "FormatId": "fmt/214"
               },
               "FileInfo":                {
                  "Filename": "SHDMC_REP_1A_V2009.xlsx",
                  "LastModified": "2016-12-13T16:04:50.492+01:00"
               },
               "Size": 8414,
               "Uri": "Content/ID9.xlsx",
               "MessageDigest":
"65b217aedf5be57d023af92c48cbe40b53ee03874634a258a911209e34c5981bc6815a1e45=
e73f01ed87c4fe998c873665b9296a5ffa4d4555481e47e1d91db6",
               "Algorithm": "SHA-512"
            }]
         }
      },
      "#type": "",
      "#tenant": 0,
      "#unitups": ["aeaaaaaaaaaam7mxabmk4akzdo5kb3yaaaaq"],
      "#operations": ["aedqaaaaacaam7mxabpvoakzdo5ijtiaaaaq"]
   }],
   "$context":    {
      "$roots": [],
      "$query": [],
      "$filter": {"$orderby": {"TransactedDate": 1}},
      "$projection": {}
   }
}


2- Ensuite vous devez interroger les balises qui font partie de la collecti=
on
OBJECTS via la requ=C3=AAte ci-apr=C3=A8s. Dans cet exemple, nous avons uti=
lis=C3=A9 la
balise "ID". Mais le r=C3=A9sultat est le m=C3=AAme avec les balises suivan=
tes :
"#nbobjects", "DataObjectGroupId", "ou "FileInfo.Filename".

Requ=C3=AAte
=3D=3D=3D=3D=3D=3D=3D=20

POST https://213.32.79.242:8444/access-external/v1/objects HTTP/1.1
Accept-Encoding: gzip,deflate
X-Http-Method-Override: GET
Accept: application/json
Content-Type: application/json
Content-Length: 196
Host: 213.32.79.242:8444
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

{
  "$roots": [],
  "$query": {

"$eq": {
    "#id":"aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba"
        =20
     }
},
  "$filter": {"$orderby": {
      "TransactedDate": 1
    }},
  "$projection": {}


}


R=C3=A9sultat obtenu=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

Aucun r=C3=A9sultat n'est renvoy=C3=A9. Ci-apr=C3=A8s le resultat.=20

HTTP/1.1 501 Not Implemented
Date: Wed, 21 Dec 2016 15:43:57 GMT
Set-Cookie: rememberMe=3DdeleteMe; Path=3D/; Max-Age=3D0; Expires=3DTue, 20=
-Dec-2016
15:43:57 GMT
Content-Type: application/json
X-REQUEST-ID: aeeaaaaaacaam7mxabpfmakzeig2prqaaaaq
Content-Length: 162
Server: Jetty(9.3.13.v20161014)

{"httpCode":501,"code":"NOT_IMPLEMENTED","context":"ACCESS_EXTERNAL","state=
":"code_vitam","message":"Not
Implemented","description":"Not Implemented","errors":[]}

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20

Historique du bogue=20
Date de modificationNom d=E2=80=99utilisateurChamp                    Chang=
ement     =20
   =20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
2016-12-21 16:58 Blaise         Nouveau bogue                              =
 =20
2016-12-21 16:58 Blaise         Statut                   nouveau =3D> affec=
t=C3=A9 =20
2016-12-21 16:58 Blaise         Assign=C3=A9 =C3=A0                 =3D> Bl=
aise         =20
2016-12-21 16:58 Blaise         Fichier ajout=C3=A9: SIP-20161213160536.zip=
        =20
         =20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
------=_Part_314_20064939.1517006384886--

------=_Part_313_30121141.1517006384886--
