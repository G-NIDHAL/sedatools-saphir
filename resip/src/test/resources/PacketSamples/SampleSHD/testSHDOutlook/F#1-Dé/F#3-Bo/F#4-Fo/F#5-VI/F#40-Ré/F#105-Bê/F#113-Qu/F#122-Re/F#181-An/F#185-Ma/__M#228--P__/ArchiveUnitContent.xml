<Content>
    <DescriptionLevel>Item</DescriptionLevel>
    <Title>[Projet VITAM 0000029]: Impossible d&apos;effectuer une requête avec le DSL sur la collection OBJECTS</Title>
    <OriginatingSystemId>&lt;96afc83ea92c94dbbe242517e01931eb@213.32.79.242&gt;</OriginatingSystemId>
    <Writer>
        <FirstName>Mantis Bug Tracker</FirstName>
        <BirthName>Mantis Bug Tracker</BirthName>
        <Identifier>admtlvitam@gmail.com</Identifier>
    </Writer>
    <Addressee>
        <FirstName>thierry.casimirius</FirstName>
        <BirthName>thierry.casimirius</BirthName>
        <Identifier>thierry.casimirius@intradef.gouv.fr</Identifier>
    </Addressee>
    <SentDate>2016-12-21T15:58:12Z</SentDate>
    <ReceivedDate>2016-12-21T15:58:18Z</ReceivedDate>
    <TextContent>Le bogue suivant a été soumis. 
====================================================================== 
http://213.32.79.242/mantisbt/view.php?id=29 
====================================================================== 
Rapporteur:                 Blaise
Responsable:                Blaise
====================================================================== 
Projet:                     Projet VITAM
Bogue ID:                   29
Catégorie:                  BugFromTestlink
Reproductibilité:           toujours
Impact:                     majeur
Priorité:                   normale
Statut:                     affecté
Comportement attendu:        
US concernée:                
====================================================================== 
Date de soumission:         2016-12-21 16:58 CET
Dernière modification:      2016-12-21 16:58 CET
====================================================================== 
Résumé:                     Impossible d&apos;effectuer une requête avec le DSL
sur la collection OBJECTS
Description: 
Depuis SAOPUI, nous devez exécuter une requête avec le DSL sur la collection
OBJECTS.  
Exemple de balises à interroger : &quot;#id&quot;, &quot;Title&quot; ou &quot;FileInfo.Filename&quot;.

Étapes pour le reproduire: 
A partir de l&apos;outil SOAPUI, exécutez la requête ci-après :

1- Interrogation de la collection OBJECTS via l&apos;exécution de la requête
ci-après : 

POST
https://213.32.79.242:8444/access-external/v1/objects/aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba
HTTP/1.1
Accept-Encoding: gzip,deflate
X-Http-Method-Override: GET
Content-Type: application/json
Accept: application/json
Content-Length: 141
Host: 213.32.79.242:8444
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

{
  &quot;$roots&quot;: [],
  &quot;$query&quot;: [
    
  ],
  &quot;$filter&quot;: {
    &quot;$orderby&quot;: {
      &quot;TransactedDate&quot;: 1
    }
  },
  &quot;$projection&quot;: {
    
  }
}

Résultat de la requête
=======================

{
   &quot;$hits&quot;:    {
      &quot;total&quot;: 1,
      &quot;offset&quot;: 0,
      &quot;limit&quot;: 1,
      &quot;size&quot;: 1
   },
   &quot;$results&quot;: [   {
      &quot;FileInfo&quot;:       {
         &quot;Filename&quot;: &quot;SHDMC_REP_1A_V2009.pdf&quot;,
         &quot;LastModified&quot;: &quot;2015-11-10T12:12:30.000+01:00&quot;
      },
      &quot;#id&quot;: &quot;aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba&quot;,
      &quot;#nbobjects&quot;: 0,
      &quot;#qualifiers&quot;:       {
         &quot;BinaryMaster&quot;:          {
            &quot;_nbc&quot;: 1,
            &quot;versions&quot;: [            {
               &quot;_id&quot;: &quot;aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaaq&quot;,
               &quot;DataObjectGroupId&quot;: &quot;aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba&quot;,
               &quot;DataObjectVersion&quot;: &quot;BinaryMaster_1&quot;,
               &quot;FormatIdentification&quot;:                {
                  &quot;FormatLitteral&quot;: &quot;Acrobat PDF 1.4 - Portable Document
Format&quot;,
                  &quot;MimeType&quot;: &quot;application/pdf&quot;,
                  &quot;FormatId&quot;: &quot;fmt/18&quot;
               },
               &quot;FileInfo&quot;:                {
                  &quot;Filename&quot;: &quot;SHDMC_REP_1A_V2009.pdf&quot;,
                  &quot;LastModified&quot;: &quot;2015-11-10T12:12:30.000+01:00&quot;
               },
               &quot;Size&quot;: 102887,
               &quot;Uri&quot;: &quot;Content/ID5.pdf&quot;,
               &quot;MessageDigest&quot;:
&quot;eb43f029e26ce2e4f5660e095db7efd4b924adbaf7b8966a765b595958c5b0a10e2c6fd7a5714634b3cc673d3da249284339a88bff89ccdfd2ea7d4821d79b86&quot;,
               &quot;Algorithm&quot;: &quot;SHA-512&quot;
            }]
         },
         &quot;Thumbnail&quot;:          {
            &quot;_nbc&quot;: 1,
            &quot;versions&quot;: [            {
               &quot;_id&quot;: &quot;aeaaaaaaaaaam7mxabmk4akzdo5kb3aaaaaq&quot;,
               &quot;DataObjectGroupId&quot;: &quot;aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba&quot;,
               &quot;DataObjectVersion&quot;: &quot;Thumbnail_1&quot;,
               &quot;FormatIdentification&quot;:                {
                  &quot;FormatLitteral&quot;: &quot;Microsoft Excel for Windows&quot;,
                  &quot;MimeType&quot;:
&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;,
                  &quot;FormatId&quot;: &quot;fmt/214&quot;
               },
               &quot;FileInfo&quot;:                {
                  &quot;Filename&quot;: &quot;SHDMC_REP_1A_V2009.xlsx&quot;,
                  &quot;LastModified&quot;: &quot;2016-12-13T16:04:50.492+01:00&quot;
               },
               &quot;Size&quot;: 8414,
               &quot;Uri&quot;: &quot;Content/ID9.xlsx&quot;,
               &quot;MessageDigest&quot;:
&quot;65b217aedf5be57d023af92c48cbe40b53ee03874634a258a911209e34c5981bc6815a1e45e73f01ed87c4fe998c873665b9296a5ffa4d4555481e47e1d91db6&quot;,
               &quot;Algorithm&quot;: &quot;SHA-512&quot;
            }]
         }
      },
      &quot;#type&quot;: &quot;&quot;,
      &quot;#tenant&quot;: 0,
      &quot;#unitups&quot;: [&quot;aeaaaaaaaaaam7mxabmk4akzdo5kb3yaaaaq&quot;],
      &quot;#operations&quot;: [&quot;aedqaaaaacaam7mxabpvoakzdo5ijtiaaaaq&quot;]
   }],
   &quot;$context&quot;:    {
      &quot;$roots&quot;: [],
      &quot;$query&quot;: [],
      &quot;$filter&quot;: {&quot;$orderby&quot;: {&quot;TransactedDate&quot;: 1}},
      &quot;$projection&quot;: {}
   }
}


2- Ensuite vous devez interroger les balises qui font partie de la collection
OBJECTS via la requête ci-après. Dans cet exemple, nous avons utilisé la
balise &quot;ID&quot;. Mais le résultat est le même avec les balises suivantes :
&quot;#nbobjects&quot;, &quot;DataObjectGroupId&quot;, &quot;ou &quot;FileInfo.Filename&quot;.

Requête
======= 

POST https://213.32.79.242:8444/access-external/v1/objects HTTP/1.1
Accept-Encoding: gzip,deflate
X-Http-Method-Override: GET
Accept: application/json
Content-Type: application/json
Content-Length: 196
Host: 213.32.79.242:8444
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

{
  &quot;$roots&quot;: [],
  &quot;$query&quot;: {

&quot;$eq&quot;: {
    &quot;#id&quot;:&quot;aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba&quot;
         
     }
},
  &quot;$filter&quot;: {&quot;$orderby&quot;: {
      &quot;TransactedDate&quot;: 1
    }},
  &quot;$projection&quot;: {}


}


Résultat obtenu 
================

Aucun résultat n&apos;est renvoyé. Ci-après le resultat. 

HTTP/1.1 501 Not Implemented
Date: Wed, 21 Dec 2016 15:43:57 GMT
Set-Cookie: rememberMe=deleteMe; Path=/; Max-Age=0; Expires=Tue, 20-Dec-2016
15:43:57 GMT
Content-Type: application/json
X-REQUEST-ID: aeeaaaaaacaam7mxabpfmakzeig2prqaaaaq
Content-Length: 162
Server: Jetty(9.3.13.v20161014)

{&quot;httpCode&quot;:501,&quot;code&quot;:&quot;NOT_IMPLEMENTED&quot;,&quot;context&quot;:&quot;ACCESS_EXTERNAL&quot;,&quot;state&quot;:&quot;code_vitam&quot;,&quot;message&quot;:&quot;Not
Implemented&quot;,&quot;description&quot;:&quot;Not Implemented&quot;,&quot;errors&quot;:[]}

====================================================================== 

Historique du bogue 
Date de modificationNom d’utilisateurChamp                    Changement      
    
====================================================================== 
2016-12-21 16:58 Blaise         Nouveau bogue                                
2016-12-21 16:58 Blaise         Statut                   nouveau =&gt; affecté  
2016-12-21 16:58 Blaise         Assigné à                 =&gt; Blaise          
2016-12-21 16:58 Blaise         Fichier ajouté: SIP-20161213160536.zip         
          
======================================================================</TextContent>
</Content>