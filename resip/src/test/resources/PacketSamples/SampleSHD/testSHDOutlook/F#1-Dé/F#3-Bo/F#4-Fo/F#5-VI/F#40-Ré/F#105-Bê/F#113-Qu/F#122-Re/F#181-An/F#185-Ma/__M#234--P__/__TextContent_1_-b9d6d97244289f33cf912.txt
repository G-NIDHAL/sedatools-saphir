Le bogue suivant a été soumis. 
====================================================================== 
http://213.32.79.242/mantisbt/view.php?id=23 
====================================================================== 
Rapporteur:                 Omar
Responsable:                Omar
====================================================================== 
Projet:                     Projet VITAM
Bogue ID:                   23
Catégorie:                  VITAM
Reproductibilité:           toujours
Impact:                     bloquant
Priorité:                   immédiate
Statut:                     affecté
Comportement attendu:        
US concernée:                
====================================================================== 
Date de soumission:         2016-12-20 16:41 CET
Dernière modification:      2016-12-20 16:41 CET
====================================================================== 
Résumé:                     [API-access-external/v1/objects-POST-Override-GET]
: httpCode 501 - NOT_IMPLEMENTED au lieu de httpcode200
Description: 
On indique dans la documentation
<serveur>/doc/raml/externe/access.html#objects_post, que cette collection
accepte la méthode POST telle qu'on le fait ci dessous (avec ou X-Qualifier:
BinaryMaster). Par contre pour nous le résultat est le même, nous obtenons un
code HTTP/1.1 501 Not Implemented

Voici la reqquête que nous soumettons via SOAPUI


POST https://213.32.79.242:8444/access-external/v1/objects HTTP/1.1
X-Qualifier: BinaryMaster
X-Http-Method-Override: GET
Accept: application/json
Content-Type: application/json
Content-Length: 72
Host: 213.32.79.242:8444
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

{
  "$roots": [],
  "$query": [],
  "$filter": {},
  "$projection": {}
}


cette requête renvoie, la réponse ci dessous

{
   "httpCode": 501,
   "code": "NOT_IMPLEMENTED",
   "context": "ACCESS_EXTERNAL",
   "state": "code_vitam",
   "message": "Not Implemented",
   "description": "Not Implemented",
   "errors": []
}


Pour information, via la version Alpha (bouchon) => en postant la requête
suivante:
POST http://127.0.0.1:8082/external/v1/objects HTTP/1.1
X-Qualifier: BinaryMaster
X-Http-Method-Override: GET
Content-Type: application/json
Accept: application/json
Content-Length: 75
Host: 127.0.0.1:8082
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

{
  "$roots": [ ],
  "$query": [ ],
  "$filter": {},
  "$projection": { }
}


le retour est le suivant:

{
   "$hits":    {
      "total": 3,
      "size": 3,
      "offset": 0,
      "limit": 100,
      "time_out": false
   },
   "$context":    {
      "$roots": [],
      "$query": [],
      "$filter": {},
      "$projection": {}
   },
   "$results":    [
            {
         "#id": "id101",
         "#type": "Document",
         "#qualifiers":          {
            "BinaryMaster": 5,
            "Thumbnail": 1,
            "Dissemination": 1,
            "TextContent": 1
         },
         "#parents": [         {
            "#id": "id1",
            "#type": "DemandeCongés",
            "#sector": "RessourcesHumaines"
         }]
      },
            {
         "#id": "id102",
         "#type": "Document",
         "#qualifiers":          {
            "BinaryMaster": 5,
            "Thumbnail": 1,
            "Dissemination": 1,
            "TextContent": 1
         },
         "#parents": [         {
            "#id": "id2",
            "#type": "DemandeCongés",
            "#sector": "RessourcesHumaines"
         }]
      },
            {
         "#id": "id103",
         "#type": "Document",
         "#qualifiers":          {
            "BinaryMaster": 3,
            "Thumbnail": 1,
            "Dissemination": 1,
            "TextContent": 1
         },
         "#parents": [         {
            "#id": "id3",
            "#type": "DemandeCongés",
            "#sector": "RessourcesHumaines"
         }]
      }
   ]
}




Pour information sur Vitam Beta, le post-override get sur la collection
access-external/v1/objects/{idu} fonctionne, cf ci dessous

POST
https://213.32.79.242:8444/access-external/v1/objects/aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba
HTTP/1.1
X-Http-Method-Override: GET
Accept: application/json
Content-Type: application/json
Content-Length: 72
Host: 213.32.79.242:8444
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

{
  "$roots": [],
  "$query": [],
  "$filter": {},
  "$projection": {}
}



réponse sur Beta

{
   "$hits":    {
      "total": 1,
      "offset": 0,
      "limit": 1,
      "size": 1
   },
   "$results": [   {
      "FileInfo":       {
         "Filename": "SHDMC_REP_1A_V2009.pdf",
         "LastModified": "2015-11-10T12:12:30.000+01:00"
      },
      "#id": "aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba",
      "#nbobjects": 0,
      "#qualifiers":       {
         "BinaryMaster":          {
            "_nbc": 1,
            "versions": [            {
               "_id": "aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaaq",
               "DataObjectGroupId": "aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba",
               "DataObjectVersion": "BinaryMaster_1",
               "FormatIdentification":                {
                  "FormatLitteral": "Acrobat PDF 1.4 - Portable Document
Format",
                  "MimeType": "application/pdf",
                  "FormatId": "fmt/18"
               },
               "FileInfo":                {
                  "Filename": "SHDMC_REP_1A_V2009.pdf",
                  "LastModified": "2015-11-10T12:12:30.000+01:00"
               },
               "Size": 102887,
               "Uri": "Content/ID5.pdf",
               "MessageDigest":
"eb43f029e26ce2e4f5660e095db7efd4b924adbaf7b8966a765b595958c5b0a10e2c6fd7a5714634b3cc673d3da249284339a88bff89ccdfd2ea7d4821d79b86",
               "Algorithm": "SHA-512"
            }]
         },
         "Thumbnail":          {
            "_nbc": 1,
            "versions": [            {
               "_id": "aeaaaaaaaaaam7mxabmk4akzdo5kb3aaaaaq",
               "DataObjectGroupId": "aeaaaaaaaaaam7mxabmk4akzdo5kbtqaaaba",
               "DataObjectVersion": "Thumbnail_1",
               "FormatIdentification":                {
                  "FormatLitteral": "Microsoft Excel for Windows",
                  "MimeType":
"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
                  "FormatId": "fmt/214"
               },
               "FileInfo":                {
                  "Filename": "SHDMC_REP_1A_V2009.xlsx",
                  "LastModified": "2016-12-13T16:04:50.492+01:00"
               },
               "Size": 8414,
               "Uri": "Content/ID9.xlsx",
               "MessageDigest":
"65b217aedf5be57d023af92c48cbe40b53ee03874634a258a911209e34c5981bc6815a1e45e73f01ed87c4fe998c873665b9296a5ffa4d4555481e47e1d91db6",
               "Algorithm": "SHA-512"
            }]
         }
      },
      "#type": "",
      "#tenant": 0,
      "#unitups": ["aeaaaaaaaaaam7mxabmk4akzdo5kb3yaaaaq"],
      "#operations": ["aedqaaaaacaam7mxabpvoakzdo5ijtiaaaaq"]
   }],
   "$context":    {
      "$roots": [],
      "$query": [],
      "$filter": {},
      "$projection": {}
   }
}




Étapes pour le reproduire: 
poster une des requêtes indiquées dans Description

Informations complémentaires: 
La version alpha utilisée est celle sur le site api vitam
====================================================================== 

Historique du bogue 
Date de modificationNom d’utilisateurChamp                    Changement      
    
====================================================================== 
2016-12-20 16:41 Omar           Nouveau bogue                                
2016-12-20 16:41 Omar           Statut                   nouveau => affecté  
2016-12-20 16:41 Omar           Assigné à                 => Omar            
======================================================================