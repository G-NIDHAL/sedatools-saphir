<Content>
    <DescriptionLevel>Item</DescriptionLevel>
    <Title>[Projet VITAM 0000016]: Impossibilité d&apos;obtenir une liste d&apos;archive via les balises règle</Title>
    <OriginatingSystemId>&lt;0451433ab71caf46ccdb09d2bc83b89d@213.32.79.242&gt;</OriginatingSystemId>
    <Writer>
        <FirstName>Mantis Bug Tracker</FirstName>
        <BirthName>Mantis Bug Tracker</BirthName>
        <Identifier>admtlvitam@gmail.com</Identifier>
    </Writer>
    <Addressee>
        <FirstName>thierry.casimirius</FirstName>
        <BirthName>thierry.casimirius</BirthName>
        <Identifier>thierry.casimirius@intradef.gouv.fr</Identifier>
    </Addressee>
    <SentDate>2016-12-14T16:43:41Z</SentDate>
    <ReceivedDate>2016-12-14T16:44:43Z</ReceivedDate>
    <TextContent>Le bogue suivant a été soumis. 
====================================================================== 
http://213.32.79.242/mantisbt/view.php?id=16 
====================================================================== 
Rapporteur:                 Jonathan
Responsable:                Jonathan
====================================================================== 
Projet:                     Projet VITAM
Bogue ID:                   16
Catégorie:                  BugFromTestlink
Reproductibilité:           toujours
Impact:                     majeur
Priorité:                   normale
Statut:                     affecté
Comportement attendu:        
US concernée:                
====================================================================== 
Date de soumission:         2016-12-14 17:43 CET
Dernière modification:      2016-12-14 17:43 CET
====================================================================== 
Résumé:                     Impossibilité d&apos;obtenir une liste d&apos;archive via
les balises règle
Description: 
Nous avons insérer un SIP avec une Unit qui possède une AppraisalRule APP-0001
déclarée dans la balise Management.
Nous cherchons a retrouver cette Unit via l&apos;API, dans la collection UNIT

Voila la requête que nous avons utilisé :
{
  &quot;$roots&quot;: [],
  &quot;$query&quot;: [
    {
      &quot;$and&quot;: [
        {
          &quot;$eq&quot;: {
            &quot;#management.AppraisalRule.Rule&quot;: &quot;APP-00001&quot;
          }
        }
      ],
      &quot;$depth&quot;: 20
    }
  ],
  &quot;$filter&quot;: {},
  &quot;$projection&quot;: {}
}


Cependant nous obtenons une erreur HTTP 412.
Nous avons effectué un test de recherche sur des balises à 2 niveaux afin de
bien valider notre format de requête et celle-ci a été validée :

{
  &quot;$roots&quot;: [],
  &quot;$query&quot;: [
    {
      &quot;$and&quot;: [
        {
          &quot;$eq&quot;: {
            &quot;Writer.FirstName&quot;: &quot;FirstName0&quot;
          }
        }
      ],
      &quot;$depth&quot;: 20
    }
  ],
  &quot;$filter&quot;: {},
  &quot;$projection&quot;: {}
}

Fin novembre nous avons avions demandé comment effectuer une recherche dans la
collection Unit afin d&apos;obtenir toutes les archives soumises a une règle, votre
réponse d&apos;utiliser cette balises : En DSL : $eq : {#management.AccessRule.Rule,
ACC00001}
Cependant cette balise nous a donné le même résultat.

Vous trouverez en pièce-jointes toutes les réponses obtenues par nos
requêtes, le détail de la Unit que nous cherchons a obtenir ainsi que son SIP
====================================================================== 

Historique du bogue 
Date de modificationNom d’utilisateurChamp                    Changement      
    
====================================================================== 
2016-12-14 17:43 Jonathan       Nouveau bogue                                
2016-12-14 17:43 Jonathan       Statut                   nouveau =&gt; affecté  
2016-12-14 17:43 Jonathan       Assigné à                 =&gt; Jonathan        
2016-12-14 17:43 Jonathan       Fichier ajouté: Anomalie Rule.zip              
     
======================================================================</TextContent>
</Content>