<Content>
    <DescriptionLevel>Item</DescriptionLevel>
    <Title>[Projet VITAM 0000056]: [API-access-external/v1/units/{idu}/object] :Retour avec &quot;httpCode&quot;: 406,  &quot;message&quot;: &quot;HTTP 406 Not Acceptable&quot; au lieu de 200</Title>
    <OriginatingSystemId>&lt;e0992b8c01f3564b9a6649c3c990e783@213.32.79.242&gt;</OriginatingSystemId>
    <Writer>
        <FirstName>Mantis Bug Tracker</FirstName>
        <BirthName>Mantis Bug Tracker</BirthName>
        <Identifier>admtlvitam@gmail.com</Identifier>
    </Writer>
    <Addressee>
        <FirstName>thierry.casimirius</FirstName>
        <BirthName>thierry.casimirius</BirthName>
        <Identifier>thierry.casimirius@intradef.gouv.fr</Identifier>
    </Addressee>
    <SentDate>2017-01-09T11:54:28Z</SentDate>
    <ReceivedDate>2017-01-09T11:54:37Z</ReceivedDate>
    <TextContent>Le bogue suivant a été soumis. 
====================================================================== 
http://213.32.79.242/mantisbt/view.php?id=56 
====================================================================== 
Rapporteur:                 Omar
Responsable:                Omar
====================================================================== 
Projet:                     Projet VITAM
Bogue ID:                   56
Catégorie:                  BugFromTestlink
Reproductibilité:           toujours
Impact:                     majeur
Priorité:                   élevée
Statut:                     affecté
Comportement attendu:        
US concernée:                
====================================================================== 
Date de soumission:         2017-01-09 12:54 CET
Dernière modification:      2017-01-09 12:54 CET
====================================================================== 
Résumé:                     [API-access-external/v1/units/{idu}/object]
:Retour avec &quot;httpCode&quot;: 406,  &quot;message&quot;: &quot;HTTP 406 Not Acceptable&quot; au lieu de
200
Description: 
Lorsque l&apos;on envoie une requête afin de récupérer une unit ou une liste de
units, l&apos;API retourne un httpCode 406au lieu de HTTP 200.

exemple :
POST
https://213.32.79.242:8444/access-external/v1/units/aeaaaaaaaaaam7mxaayieakzqlkgbsiaaaaq/object
HTTP/1.1
X-Http-Method-Override: GET
Accept: application/json
Content-Type: application/json
Content-Length: 72
Host: 213.32.79.242:8444
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

{
  &quot;$roots&quot;: [],
  &quot;$query&quot;: [],
  &quot;$filter&quot;: {},
  &quot;$projection&quot;: {}
}

le retour de l&apos;API est le suivant :


HTTP/1.1 406 Not Acceptable
Date: Mon, 09 Jan 2017 11:48:42 GMT
Set-Cookie: rememberMe=deleteMe; Path=/; Max-Age=0; Expires=Sun, 08-Jan-2017
11:48:42 GMT
Content-Type: application/json
X-REQUEST-ID: aeeaaaaaacaam7mxabapkakzqkgld7qaaaba
Content-Length: 260
Server: Jetty(9.3.13.v20161014)

{&quot;httpCode&quot;:406,&quot;code&quot;:&quot;000200&quot;,&quot;context&quot;:&quot;{\&quot;Name\&quot;:\&quot;vitam-tra1.localdomain\&quot;,\&quot;Role\&quot;:\&quot;access-external\&quot;,\&quot;PlatformId\&quot;:425367}&quot;,&quot;state&quot;:&quot;GLOBAL_INTERNAL_SERVER_ERROR&quot;,&quot;message&quot;:&quot;HTTP
406 Not Acceptable&quot;,&quot;description&quot;:&quot;HTTP 406 Not Acceptable&quot;,&quot;errors&quot;:[]}




en pièce jointe le SIP inséré avec l&apos;ATR OK ainsi que la liste des id AU que
l&apos;on a tenté.
Note la recherche via IHM fonctionne sur l&apos;AU &quot;répertoire&quot; ou &quot;fichier&quot;

Étapes pour le reproduire: 
Via SOAP UI, Lancer le cas de Test ACC-01-000 \ Télécharger un fichier \
PVI-715:Télécharger un SIP 1 trouvé via une recherche API
en initialisant le de g_#ID aux valeur des AU ID de l&apos;ATR en pièce jointe

Informations complémentaires: 
cette interrogation ne fonctionnait pas non dans la version ALPHA
====================================================================== 

Historique du bogue 
Date de modificationNom d’utilisateurChamp                    Changement      
    
====================================================================== 
2017-01-09 12:54 Omar           Nouveau bogue                                
2017-01-09 12:54 Omar           Statut                   nouveau =&gt; affecté  
2017-01-09 12:54 Omar           Assigné à                 =&gt; Omar            
2017-01-09 12:54 Omar           Fichier ajouté: ATR_SIP-20170109114257.xml     
              
======================================================================</TextContent>
</Content>